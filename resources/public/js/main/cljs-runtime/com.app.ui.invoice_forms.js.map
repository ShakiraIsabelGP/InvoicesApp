{"version":3,"sources":["com/app/ui/invoice_forms.cljc"],"mappings":"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","names":["p__63179","map__63180","cljs.core/--destructure-map","cljs.core.get","com.app.ui.invoice-forms/add-subtotal*","quantity","quoted-price","item","cljs.core.assoc","com.fulcrologic.rad.type_support.decimal._STAR_","options__57920__auto__","get-class__57913__auto__","com.fulcrologic.rad.form/convert-options","com.fulcrologic.rad.options-util/?fix-keys","com.fulcrologic.fulcro.components/wrapped-render","com.fulcrologic.fulcro.components/props","com.fulcrologic.rad.form/render-layout","js/com","js/com.app","js/com.app.ui","js/com.app.ui.invoice-forms","js/com.app.ui.invoice-forms.LineItemForm","com.fulcrologic.fulcro.components/react-constructor","com.fulcrologic.fulcro.components/configure-component!","com.app.ui.invoice-forms/LineItemForm","this","props","com.app.model.line-item/id","com.app.model.line-item/item","com.app.model.line-item/quantity","com.app.model.line-item/quoted-price","com.app.model.line-item/subtotal","new-form-tree","p__63181","map__63182","state-map","fulcro-app","uism-env","form-ident","k","old-value","new-value","G__63183","cljs.core/Keyword","item-price","cljs.core.get_in","cljs.core.conj","target-path","com.fulcrologic.fulcro.ui_state_machines.apply_action","cljs.core/assoc-in","com.app.ui.inventory/ItemForm","_","options","cljs.core.mapv","p__63184","map__63185","id","name","price","com.fulcrologic.rad.type_support.decimal.numeric__GT_currency_str","cljs.core.sort_by","com.app.ui.invoice-forms/tax-rate","p__63186","map__63187","com.app.ui.invoice-forms/sum-subtotals*","line-items","invoice","cljs.core.reduce","p__63188","map__63189","t","subtotal","com.fulcrologic.rad.type_support.decimal._PLUS_","com.fulcrologic.rad.type-support.decimal/zero","js/com.app.ui.invoice-forms.InvoiceForm","com.app.ui.invoice-forms/InvoiceForm","com.app.model.invoice/id","com.app.model.invoice/customer","com.app.model.invoice/date","com.app.model.invoice/line-items","com.app.model.invoice/total","com.fulcrologic.rad.type-support.date-time/now","com.fulcrologic.rad.picker-options/form","com.app.ui.account-forms/BriefAccountForm","com.fulcrologic.rad.form-options/title","p__63194","map__63195","i","com.fulcrologic.fulcro.algorithms.tempid/tempid?","com.fulcrologic.rad.picker-options/quick-create","v","com.fulcrologic.fulcro.algorithms.tempid.tempid","clojure.string/lower-case","com.fulcrologic.rad.picker-options/allow-create?","com.fulcrologic.rad.picker-options/allow-edit?","com.fulcrologic.rad.picker-options/query-key","com.fulcrologic.rad.picker-options/query-component","com.app.model.account/AccountQuery","com.fulcrologic.rad.picker-options/options-xform","p__63192","map__63193","email","com.fulcrologic.rad.picker-options/cache-time-ms","com.fulcrologic.rad.form-options/ui","com.fulcrologic.rad.form-options/can-delete?","com.fulcrologic.rad.form-options/can-add?","p__63190","map__63191","com.app.ui.invoice-forms/AccountInvoices","com.fulcrologic.rad.report.report","com.fulcrologic.rad.report-options/title","com.fulcrologic.rad.report-options/source-attribute","com.fulcrologic.rad.report-options/row-pk","com.fulcrologic.rad.report-options/columns","com.fulcrologic.rad.report-options/column-headings","com.fulcrologic.rad.report-options/form-links","com.fulcrologic.rad.report-options/controls","com.fulcrologic.rad.report-options/run-on-mount?","com.fulcrologic.rad.report-options/route","options__35388__auto__","this__59561__auto__","forms__59556__auto__","id-attrs__59557__auto__","cljs.core.keep","p1__59555__59558__auto__","com.fulcrologic.fulcro.components/component-options","cljs.core/vals","cljs.core/vec","cljs.core.into","cljs.core.map","attr__59559__auto__","or__5045__auto__","cljs.core/set","cljs.core.concat","props63196","k__59560__auto__","computed__59562__auto__","com.fulcrologic.fulcro.components/get-computed","com.fulcrologic.rad.report/render-row","com.app.ui.invoice-forms/InvoiceList-Row","js/com.app.ui.invoice-forms.InvoiceList-Row","com.fulcrologic.rad.report/default-compare-rows","com.fulcrologic.rad.report/render-layout","app__59551__auto__","route-params__59552__auto__","com.fulcrologic.rad.report/report-will-enter","params","G__63215","p1__59553__59554__auto__","cljs.core/select-keys","cljs.core.remove","com.fulcrologic.rad.control/control-map->controls","cljs.core/contains?","com.fulcrologic.fulcro.components.get_query","com.fulcrologic.rad.control/Control","js/com.app.ui.invoice-forms.InvoiceList","com.app.ui.invoice-forms/InvoiceList","com.app.model.account/email","com.app.model.account/name","com.fulcrologic.rad.form.create_BANG_","com.app.ui.account-forms/AccountForm","app","com.fulcrologic.rad.type_support.date_time.end_of_year","p__63197","map__63198","p__63206","map__63207","row","com.fulcrologic.rad.routing.route_to_BANG_","p__63199","map__63200","p__63208","map__63209","com.fulcrologic.rad.form/delete!","p__63201","map__63202","p__63210","map__63211","com.fulcrologic.rad.form.edit_BANG_","p__63203","map__63204","p__63212","map__63213","report-instance","com.fulcrologic.fulcro.components.transact_BANG_","G__63205","G__63214","com.app.model.account/sendemail"],"sourcesContent":["(ns com.app.ui.invoice-forms\n  (:require\n    [clojure.string :as str]\n    [com.fulcrologic.fulcro.components :as comp :refer [defsc]]\n    [com.fulcrologic.fulcro.algorithms.tempid :as tempid]\n    [com.fulcrologic.rad.picker-options :as po]\n    [com.fulcrologic.rad.type-support.decimal :as math]\n    [com.app.model :as model]\n    [com.app.model.account :as account :refer [AccountQuery]]\n    [com.app.model.invoice :as invoice]\n    [com.fulcrologic.fulcro.algorithms.form-state :as fs]\n    [com.fulcrologic.rad.picker-options :as picker-options]\n    [com.app.ui.account-forms :refer [BriefAccountForm AccountForm]]\n    [com.fulcrologic.rad.form :as form]\n    [com.fulcrologic.rad.form-options :as fo]\n    [com.fulcrologic.rad.routing :as rroute]\n    [com.fulcrologic.rad.type-support.date-time :as datetime]\n    [com.fulcrologic.rad.report :as report]\n    [com.fulcrologic.rad.type-support.date-time :as dt]\n    [com.fulcrologic.rad.report-options :as ro]\n    [com.app.model.line-item :as line-item]\n    [com.app.ui.inventory :as item-forms]\n    [com.fulcrologic.rad.type-support.decimal :as math]\n    [com.fulcrologic.fulcro.ui-state-machines :as uism]\n    [com.fulcrologic.fulcro.algorithms.normalized-state :as fns]\n    #?(:clj  [com.fulcrologic.fulcro.dom-server :as dom :refer [div label input]]\n       :cljs [com.fulcrologic.fulcro.dom :as dom :refer [div label input]])))\n\n\n(defn add-subtotal* [{:line-item/keys [quantity quoted-price] :as item}]\n  (assoc item :line-item/subtotal (math/* quantity quoted-price)))\n\n(form/defsc-form LineItemForm [this props]\n                 {fo/id line-item/id\n                  fo/attributes [line-item/item line-item/quantity line-item/quoted-price line-item/subtotal]\n                  fo/route-prefix \"line-item\"\n                  fo/title \"Line Items\"\n                  fo/layout [[:line-item/item :line-item/quantity :line-item/quoted-price :line-item/subtotal]]\n                  fo/triggers {:derive-fields (fn [new-form-tree] (add-subtotal* new-form-tree))\n                               :on-change (fn [{::uism/keys [state-map fulcro-app] :as uism-env} form-ident k old-value new-value]\n                                            (case k :line-item/item\n                                                    (let [item-price  (get-in state-map (conj new-value :item/price))\n                                                          target-path (conj form-ident :line-item/quoted-price)]\n                                                      (uism/apply-action uism-env assoc-in target-path item-price)) uism-env))}\n                  fo/field-styles  {:line-item/item :pick-one}\n                  fo/field-options {:line-item/item {::picker-options/query-key :item/all-items\n                                                     ::picker-options/query-component item-forms/ItemForm\n                                                     ::picker-options/options-xform (fn [_ options]\n                                                                                      (mapv (fn [{:item/keys [id name price]}]\n                                                                                              {:text (str name \" - \" (math/numeric->currency-str price)) :value [:item/id id]})\n                                                                                            (sort-by :item/name options)))}}})\n(def tax-rate 0.19)\n(defn sum-subtotals* [{:invoice/keys [line-items] :as invoice}]\n  (assoc invoice :invoice/total\n                 (reduce\n                   (fn [t {:line-item/keys [subtotal]}]\n                     (math/+ t subtotal (math/* subtotal tax-rate)))\n                   (math/zero)\n                   line-items)))\n\n\n\n(form/defsc-form InvoiceForm [this props]\n                 {fo/id             invoice/id\n                  fo/attributes     [invoice/customer invoice/date invoice/line-items invoice/total]\n                  fo/default-values {:invoice/date (datetime/now)}\n                  fo/layout         [[:invoice/customer :invoice/date]\n                                     [:invoice/line-items]\n                                     [:invoice/total]]\n                  fo/field-styles   {:invoice/customer :pick-one}\n                  fo/field-options  {:invoice/customer {po/form            BriefAccountForm\n                                                        fo/title           (fn [i {:account/keys [id]}]\n                                                                             (if (tempid/tempid? id)\n                                                                               \"New Account\"\n                                                                               \"Edit Account\"))\n                                                        po/quick-create    (fn [v] {:account/id        (tempid/tempid)\n                                                                                    :account/email     (str/lower-case (str v \"@example.com\"))\n                                                                                    :account/active?   true\n                                                                                    :account/name      v})\n                                                        po/allow-create?   true\n                                                        po/allow-edit?     true\n                                                        po/query-key       :account/all-accounts\n                                                        po/query-component AccountQuery\n                                                        po/options-xform   (fn [_ options] (mapv\n                                                                                             (fn [{:account/keys [id name email]}]\n                                                                                               {:text (str name \", \" email) :value [:account/id id]})\n                                                                                             (sort-by :account/name options)))\n                                                        po/cache-time-ms   30000}}\n                  fo/subforms       {:invoice/line-items {fo/ui          LineItemForm\n                                                          fo/can-delete? (fn [_ _] true)\n                                                          fo/can-add?    (fn [_ _] true)}}\n                  fo/triggers       {:derive-fields (fn [new-form-tree] (sum-subtotals* new-form-tree))}\n                  fo/route-prefix   \"invoice\"\n                  fo/title          (fn [_ {:invoice/keys [id]}]\n                                      (if (tempid/tempid? id)\n                                        (str \"New Invoice\")\n                                        (str \"Invoice \" id)))})\n\n(def AccountInvoices\n  (report/report ::AccountInvoices\n                 {ro/title            \"Customer Invoices\"\n                  ro/source-attribute :account/invoices\n                  ro/row-pk           invoice/id\n                  ro/columns          [invoice/id invoice/date invoice/total]\n                  ro/column-headings  {:invoice/id \"Invoice Number\"}\n\n                  ro/form-links       {:invoice/id InvoiceForm}\n                  ro/controls         {:account/id {:type   :uuid\n                                                    :local? true\n                                                    :label  \"Account\"}}\n                  ro/run-on-mount?    true\n                  ro/route            \"account-invoices\"}))\n\n\n\n(report/defsc-report InvoiceList [this props]\n                     {ro/title               \"All Invoices\"\n                      ro/source-attribute    :invoice/all-invoices\n                      ro/row-pk              invoice/id\n                      ro/columns             [invoice/id invoice/date account/email account/name invoice/total]\n\n                      ro/row-query-inclusion [:account/id]\n\n                      ro/column-headings     {:invoice/id   \"Invoice Number\"\n                                              :account/name \"Customer Name\"\n                                              :account/email \"Email Name\"}\n                      ro/initial-sort-params {:sort-by          :invoice/date\n                                              :sortable-columns #{:invoice/date}\n                                              :ascending?       true}\n\n                      ro/controls            {::new-invoice {:label  \"New Invoice\"\n                                                             :type   :button\n                                                             :action (fn [this] (form/create! this InvoiceForm))}\n                                              ::new-account {:label  \"New Account\"\n                                                             :type   :button\n                                                             :action (fn [this] (form/create! this AccountForm))}\n                                              :start-date {:type          :instant\n                                                           :style         :starting-date\n                                                           :default-value (fn [app] #inst \"2020-01-01T12:00\")\n                                                           :label         \"From\"}\n                                              :end-date   {:type          :instant\n                                                           :style         :ending-date\n                                                           :default-value (fn [app] (dt/end-of-year))\n                                                           :label         \"To\"}}\n\n                      ro/control-layout      {:action-buttons [::new-invoice ::new-account]\n                                              :inputs         [[:start-date :end-date]]}\n\n                      ro/row-actions         [{:label  \"Account Invoices\"\n                                               :action (fn [this {:account/keys [id] :as row}]\n                                                         (rroute/route-to! this AccountInvoices {:account/id id}))}\n                                              {:label  \"Delete\"\n                                               :action (fn [this {:invoice/keys [id] :as row}] (form/delete! this :invoice/id id))}\n                                              {:label  \"Edit\"\n                                               :action (fn [this {:invoice/keys [id] :as row}] (form/edit! this InvoiceForm id))}\n                                              {:label     \"Send Invoice\"\n                                               :action    (fn [report-instance {:account/keys [email]}]\n                                                            #?(:cljs (comp/transact! report-instance [(account/sendemail {:account/email email})])))}]\n\n                      ro/form-links          {:invoice/total InvoiceForm\n                                              :account/name  AccountForm}\n\n                      ro/run-on-mount?       true\n                      ro/route               \"invoices\"})\n"]}