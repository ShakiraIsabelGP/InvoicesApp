{"version":3,"sources":["com/fulcrologic/rad/form_options.cljc"],"mappings":";AAmBA;;;sCAAA,tCAAKA;AAIL;;;;8CAAA,9CAAKC;AAKL;;;;;;;;;;;;;;0CAAA,1CAAKC;AAeL;;;;;;;;;;;;;;;;;;;;;iDAAA,jDAAKC;AAsBL;;;yCAAA,zCAAKC;AAIL;;;;;;;;wDAAA,xDAAKC;AASL;;;;yDAAA,zDAAKC;AAKL;;;;;;;;+CAAA,/CAAKC;AASL;;;;;;;;;;;;;;gDAAA,hDAAKC;AAeL;;;;;;;;;;;;;;iDAAA,jDAAKC;AAeL;;;;gDAAA,hDAAKC;AAKL;;;;6CAAA,7CAAKC;AAKL;;;;;gDAAA,hDAAKC;AAML;;;;;;;;;;;;;;;gDAAA,hDAAKC;AAgBL;;;;;;;;4CAAA,5CAAKC;AASL;;;;kDAAA,lDAAKC;AAKL;;;;;;;;;;;;mDAAA,nDAAKC;AAaL;;;;iDAAA,jDAAKC;AAKL;;;;;kDAAA,lDAAKC;AAML;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4CAAA,5CAAKC;AAgCL,AAAAC,2CAAA;AAkBA;;;;;;iDAAA,jDAAKC;AAOL;;;;;uDAAA,vDAAKC;AAML;;;;sDAAA,tDAAKC;AAKL;;;;;;;;;;;;;;;;;;;;;;;;;4CAAA,5CAAKC;AA0BL;;;;qDAAA,rDAAKC;AAKL;;;;;;;+CAAA,/CAAKC;AAQL;;;;;;sCAAA,tCAAKC;AAOL;;;;;sDAAA,tDAAKC;AAML;;;;;;;+CAAA,/CAAKC;AAQL;;;;;uDAAA,vDAAKC;AAML;;;;;;;;;;;;iDAAA,jDAAKC;AAaL;;;;oDAAA,pDAAKC;AAKL;;;;;oDAAA,pDAAKC;AAML;;;;;qDAAA,rDAAKC;AAML;;;;;;;;kDAAA,lDAAKC;AASL;;;;2CAAA,3CAAKC;AAKL;;;gDAAA,hDAAKC;AAIL;;;;;;;;;;;;;uDAAA,vDAAKC;AAcL;;;;;iDAAA,jDAAKC;AAML;;;;+CAAA,/CAAKC;AAKL;;;;;yDAAA,zDAAKC;AAML;;;;;;;;;;;;6CAAA,7CAAKC;AAaL;;;;;sDAAA,tDAAKC;AAML,AAAAC,qDAAA;AAMA;;;;;;;;;;;;;;;;;;;;;;;2CAAA,3CAAKC;AAwBL,AAAA;;;mDAAA,2DAAAC,9GAAME;AAAN,AAAA,IAAAD,WAAA,AAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,OAAAC,+EAAA,CAAA,UAAA;;;KAAA;AAAA,OAAAA,+EAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;;AAAA,MAAA,KAAAC,MAAA,CAAA,8DAAA,AAAA;;;;;AAAA,CAAA,iFAAA,jFAAMD,4FAEFE;AAFJ,AAGG,IAAMC,YAAU,kBAAA,WAAAC,7BAACC;AAAD,AAAU,oDAAA,7CAACC,gGAAO,0EAAAF,1EAACG;GAAY,AAACtD,0EAAWiD;AAA3D,AACE,OAACM,+CACC,WAAKC,IAAIC;AAAT,AACE,IAAMC,OAAK,AAACC,+EAAgBV,aAAaQ;AAAzC,AACE,GAAI,AAACG,cAAIF;AACP,OAACG,8CAAML,IAAI,AAACM,mFAAiBL,MAAMC;;AACnCF;;GALR,mCAOEN;;;AAXP,CAAA,iFAAA,jFAAMH,4FAYFE,aAAac;AAZjB,AAaG,IAAMC,UAAa,AAAA,sJAA0Cf;IACvDgB,WAAa,iBAAAC,WAAQH;AAAR,AAAA,GACE,4BAAAI,3BAAUJ;AADZ,sFAAAG,8BAAAA,5GAC6BF,wCAAAA,kDAAAA;;AAD7BE;;;IAEbE,IAAa,AAACN,mFAAiBG;IAC/BhB,mBAAa,AAACoB,oFAAG,4DAAA,5DAACC,+CAAOrB,gGAAc/B,0CAASkD,6DAAInB,aAAagB;IACjEM,cAAa,iBAAAC,mBAAIvB;AAAJ,AAAA,oBAAAuB;AAAAA;;AAAiB,OAACH,oFAAG,AAAClD,uEAAQ8C,4DAAUhB,iBAAagB;;;AALxE,AAME,IAAAQ,WAAQF;AAAR,AAAA,GACE,AAACG,0BAAUH,YAAY7C;AAAI,sDAAA+C,/CAACE,wDAAOjD,oCAAG,WAAKkD;AAAL,AACE,IAAAC,WAAQ,AAACR,oFAAGO,oDAAE3B,iBAAamB;AAA3B,AAAA,GAAA,CAAAS,YAAA;AAAA;;AAA8B,oEAAAA,7DAACC;;;;AAFzEL;;;;AAnBL,CAAA,2EAAA,3EAAM1B;;AAAN,AAuBA,AAAA;;;qDAAA,6DAAAF,lHAAMmC;AAAN,AAAA,IAAAD,WAAA,AAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,OAAAC,iFAAA,CAAA,UAAA;;;KAAA;AAAA,OAAAA,iFAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;;AAAA,MAAA,KAAAhC,MAAA,CAAA,8DAAA,AAAA;;;;;AAAA,CAAA,mFAAA,nFAAMgC,8FAEF/B;AAFJ,AAGG,OAACM,+CACC,WAAKC,IAAIC;AAAT,AACE,IAAMC,OAAK,AAACuB,iFAAkBhC,aAAaQ;AAA3C,AACE,GAAI,AAACG,cAAIF;AACP,OAACG,8CAAML,IAAI,AAACM,mFAAiBL,MAAMC;;AACnCF;;GALR,mCAOE,AAACxD,0EAAWiD;;;AAVjB,CAAA,mFAAA,nFAAM+B,8FAWF/B,aAAaiC;AAXjB,AAYG,IAAMlB,UAAa,AAAA,sJAA0Cf;IACvDQ,OAAa,iBAAA0B,WAAQD;AAAR,AAAA,GACE,wBAAAf,vBAAUe;AADZ,sFAAAC,8BAAAA,5GACyBnB,wCAAAA,kDAAAA;;AADzBmB;;;IAEbf,IAAa,AAACN,mFAAiBL;IAC/BR,mBAAa,AAACoB,oFAAG,4DAAA,5DAACC,+CAAOrB,gGAAczC,+CAAc4D,6DAAInB,aAAaQ;AAJ5E,AAKE,IAAAe,mBAAIvB;AAAJ,AAAA,oBAAAuB;AAAAA;;AAAiB,OAACH,oFAAG,AAAC7D,6EAAciD,wDAAMR,iBAAaQ;;;;AAjB5D,CAAA,6EAAA,7EAAMuB;;AAAN,AAmBA;;;;;qDAAA,rDAAMI,kHAIHnC,aAAaoC;AAJhB,AAKE,IAAMjB,IAAc,AAACN,mFAAiBuB;IAChCC,gBAAc,AAACtE,6EAAcqE;IAC7BE,YAAc,AAAC5B,+EAAgBV,aAAaoC;IAC5CG,UAAc,AAACnB,oFAAG,AAAC3C,kEAAG6D,6DAAWtC,aAAamB;AAHpD,AAIE,IAAAI,mBACE,AAACH,oFAAG,4DAAA,5DAACC,+CAAOrB,gGAAchC,gDAAemD,6DAAInB,aAAaoC;AAD5D,AAAA,oBAAAb;AAAAA;;AAAA,IAAAA,uBAEE,AAACH,oFAAG,AAACpD,8EAAe,AAAC0C,+EAAgBV,aAAaoC,8DAAYpC,aAAaoC;AAF7E,AAAA,oBAAAb;AAAAA;;AAAA,IAAAA,uBAGE,AAACH,oFAAG,AAACC,+CAAO,iBAAAmB,WAAQD;AAAR,AAAA,GAAA,CAAAC,YAAA;AAAA;;AAAA,+DAAAA,xDAAgBC;;KAAxB,mFAA+CzE,gDAAemD,6DAAInB,aAAaoC;AAHrF,AAAA,oBAAAb;AAAAA;;AAIE,OAACH,oFAAGiB,gEAAcrC,aAAaoC","names":["com.fulcrologic.rad.form-options/id","com.fulcrologic.rad.form-options/attributes","com.fulcrologic.rad.form-options/layout","com.fulcrologic.rad.form-options/tabbed-layout","com.fulcrologic.rad.form-options/title","com.fulcrologic.rad.form-options/field-visible?","com.fulcrologic.rad.form-options/fields-visible?","com.fulcrologic.rad.form-options/field-style","com.fulcrologic.rad.form-options/field-styles","com.fulcrologic.rad.form-options/field-options","com.fulcrologic.rad.form-options/field-labels","com.fulcrologic.rad.form-options/validator","com.fulcrologic.rad.form-options/route-prefix","com.fulcrologic.rad.form-options/cancel-route","com.fulcrologic.rad.form-options/controls","com.fulcrologic.rad.form-options/action-buttons","com.fulcrologic.rad.form-options/query-inclusion","com.fulcrologic.rad.form-options/default-value","com.fulcrologic.rad.form-options/default-values","com.fulcrologic.rad.form-options/subforms","com.fulcrologic.rad.form-options/subform","com.fulcrologic.rad.form-options/layout-styles","com.fulcrologic.rad.form-options/validation-messages","com.fulcrologic.rad.form-options/validation-message","com.fulcrologic.rad.form-options/triggers","com.fulcrologic.rad.form-options/enumerated-labels","com.fulcrologic.rad.form-options/field-label","com.fulcrologic.rad.form-options/ui","com.fulcrologic.rad.form-options/field-style-config","com.fulcrologic.rad.form-options/input-props","com.fulcrologic.rad.form-options/field-style-configs","com.fulcrologic.rad.form-options/sort-children","com.fulcrologic.rad.form-options/read-only-fields","com.fulcrologic.rad.form-options/read-only?","com.fulcrologic.rad.form-options/can-delete?","com.fulcrologic.rad.form-options/can-add?","com.fulcrologic.rad.form-options/machine","com.fulcrologic.rad.form-options/debug?","com.fulcrologic.rad.form-options/initialize-ui-props","com.fulcrologic.rad.form-options/save-mutation","com.fulcrologic.rad.form-options/save-params","com.fulcrologic.rad.form-options/silent-abandon?","com.fulcrologic.rad.form-options/add-label","com.fulcrologic.rad.form-options/show-header?","com.fulcrologic.rad.form-options/omit-label?","com.fulcrologic.rad.form-options/confirm","var_args","G__86844","com.fulcrologic.rad.form-options/subform-options","js/Error","form-options","ref-attrs","p1__86842#","cljs.core/filterv","cljs.core._EQ_","com.fulcrologic.rad.attributes-options/type","cljs.core.reduce","acc","attr","opts","com.fulcrologic.rad.form_options.subform_options","cljs.core/seq","cljs.core.assoc","com.fulcrologic.rad.attributes-options/qualified-key","ref-attr-or-key","k->a","ref-attr","G__86845","cljs.core/Keyword","k","com.fulcrologic.rad.options_util._QMARK__BANG_","cljs.core.get_in","raw-options","or__5045__auto__","G__86846","cljs.core/contains?","cljs.core.update","c","G__86847","com.fulcrologic.fulcro.raw.components/registry-key->class","G__86849","com.fulcrologic.rad.form-options/get-field-options","com.fulcrologic.rad.form_options.get_field_options","attr-or-key","G__86850","com.fulcrologic.rad.form-options/get-default-value","attribute","default-value","sfoptions","SubForm","G__86856","com.fulcrologic.fulcro.raw.components/component-options"],"sourcesContent":["(ns com.fulcrologic.rad.form-options\n  \"Documented definitions of the standard form options. These provide easy access to documentation for the options,\n  along with preventing spelling errors when using the keys in definitions. Plugin authors are encouraged to\n  write their own options files to get the same benefits.\n\n  Forms currently require a minimum of two options:\n\n  * `id`\n  * `attributes`\n\n  NOTE to maintainers and Plugin authors: These files must be CLJC to make sure the symbols are resolvable\n  at *compile* time. No dynamic tricks please. The form and report macros must be able to resolve the option\n  symbols during evaluation.\"\n  (:require\n    [com.fulcrologic.fulcro.raw.components :as rc]\n    [com.fulcrologic.rad.attributes-options :as ao]\n    [com.fulcrologic.rad.options-util :refer [?! defoption]]\n    [taoensso.timbre :as log]))\n\n(def id\n  \"RForm option. EQUIRED: The *attribute* that will act as the primary key for this form.\"\n  :com.fulcrologic.rad.form/id)\n\n(def attributes\n  \"Form option. REQUIRED: A vector of *attributes* that should be state-managed (should be saved/loaded). If the attribute\n  isn't in this list, it will not be managed.\"\n  :com.fulcrologic.rad.form/attributes)\n\n(def layout\n  \"Form option. OPTIONAL (may not be supported by your rendering plugin): A vector of vectors holding the\n  *qualified keys* of the editable attributes.\n\n   This is intended to represent the *desired* layout of the fields on this form. The inner vectors loosely\n   represent rows of the form. UI plugins may choose to ignore this, or may define alternate\n   keys to support more complex layout.\n\n   ```\n   [[:item/name] [:item/enabled?]\n    [:item/description]]\n   ```\n   \"\n  :com.fulcrologic.rad.form/layout)\n\n(def tabbed-layout\n  \"Form option. OPTIONAL, may not be supported by your rendering plugin.\n\n  A description of a layout that will place fields in tabs to reduce visual clutter. The layout\n  specification is:\n\n  ```\n  [\\\"Basic Info\\\"\n   [[:employee/first-name :employee/last-name :employee/email]\n    [:employee/address]\n    [:employee/code :employee/enabled?]\n    [:employee/start-date :employee/hourly-wage :employee/ssn]]\n   \\\"Notes\\\"\n   [[:employee/notes]]\n   \\\"Permissions\\\"\n   [[:employee/permissions]]]\n  ```\n\n  Where the top-level vector is a sequence of strings interposed with field layouts.\n  \"\n  :com.fulcrologic.rad.form/tabbed-layout)\n\n(def title\n  \"Form option. OPTIONAL: The title for the form. Can be a string or a `(fn [form-instance form-props])`.\"\n  :com.fulcrologic.rad.form/title)\n\n(def field-visible?\n  \"Attribute option. OPTIONAL.\n\n   A boolean or `(fn [form-instance attr] boolean?)`. `attr` will be the full attribute that this option is attached to.\n\n   An attribute-level key that can be used on an attribute to define the default visibility for an attribute on\n   forms.  Forms may override the attribute-specific key with `fields-visible?`.\"\n  :com.fulcrologic.rad.form/field-visible?)\n\n(def fields-visible?\n  \"Form option. OPTIONAL: A map from *qualified keyword* to a boolean or a `(fn [this])`. Makes fields statically or dynamically\n   visible on the form. May be given a default on the attribute definition using `::form/field-visible?`\"\n  :com.fulcrologic.rad.form/fields-visible?)\n\n(def field-style\n  \"Attribute option. OPTIONAL: A *keyword* (or `(fn [form-instance] kw)`)\n   that changes the style of the control that is rendered for the given field. If not found, the renderer will\n   revert to `:default`. If the attribute has a `::attr/style` then that will be attempted as a backup to this\n   option.\n\n   Forms can override this with `::form/field-styles`.\"\n  :com.fulcrologic.rad.form/field-style)\n\n(def field-styles\n  \"Form option. OPTIONAL: A map from *qualified keyword* of the attribute to the *style* (a keyword) desired for the renderer of that\n  attribute (a keyword defined by your rendering plugin).\n\n  The values in this map can be `(fn [form-instance] keyword)`.\n\n   Changes the style of the control that is rendered for the given field. If not found, the renderer will\n   revert to `:default`.\n\n   Attributes can set a default for this with ::form/field-style, and an attribute's `ao/style` will be treated as\n   a last resort place to find a style.\n\n   See also `field-options`.\"\n  :com.fulcrologic.rad.form/field-styles)\n\n(def field-options\n  \"Form OR Attribute option. OPTIONAL: Options related to behavior of a field when it appears on a form.\n\n  When used on a form: A map from *qualified keyword* of attributes to a map of options targeted to the specific UI control for that\n  field. The content of the map will be defined by the control in question.\n\n  When used on an attribute, it should just be the form field options map for that attribute.\n\n  The value of the options can also be a `(fn [form-options attr] field-options)`.\n\n  Use `fo/get-field-options` to properly pull field options in code.\n\n  See also the `picker-options` namespace.\"\n  :com.fulcrologic.rad.form/field-options)\n\n(def field-labels\n  \"Form option. OPTIONAL: A map from *qualified keyword* to a string label for that field, or a `(fn [this] string?)` that can\n  generate the label. Can be overridden by ::form/field-label on the attribute.\"\n  :com.fulcrologic.rad.form/field-labels)\n\n(def validator\n  \"Form option. OPTIONAL: A Fulcro `form-state` validator (see `make-validator`). Will be used to validate all fields on this\n  form. Subforms may define a validator, but the master form's validator takes precedence.\"\n  :com.fulcrologic.rad.form/validator)\n\n(def route-prefix\n  \"Form options. OPTIONAL: A string. The string to use as this form's route prefix. If you do not provide this key then the router\n   will primarily be usable as a subform, since it will not support routing.\n   \"\n  :com.fulcrologic.rad.form/route-prefix)\n\n(def cancel-route\n  \"Form option. OPTIONAL: A vector of strings, a route target class (recommended), a map with :route/:target and :params keys,\n   or `:back` (default).\n\n   The route to go to on cancel.\n\n   A vector of strings or a map will ignore history, a route target class is recommended when using history, and\n   `:back` requires route history to be installed. You may also specify `:none` if you do not want to route away from\n   the form after cancelling, and instead want to do something different (e.g. via the :on-cancel event).\n\n   If you return a map is must have ONE OF :route (a vector of strings) or :target (a route target class). The :params\n   is an optional map. A `:route` will not end up in history, so `:target` is preferred.\n\n   You can also supply a `(fn [app form-props] ...)` for this option that returns any of the above.\"\n  :com.fulcrologic.rad.form/cancel-route)\n\n(def controls\n  \"ALIAS to com.fulcrologic.rad.control/controls, which is a map from a made-up control key to a control definition\n  (e.g. a button). See the control ns. Forms have a standard map of controls, and if you set this you should\n  merge `form/standard-controls` with your new controls, unless you want to completely redefined the controls.\n\n  Controls can be rendered in the action buttons (see fo/action-buttons) OR their keys can be included in the layout\n  of the form itself to put arbitrary non-field controls anywhere on the form.\"\n  :com.fulcrologic.rad.control/controls)\n\n(def action-buttons\n  \"Form option. A vector of action button keys (see controls). Specifies the layout order of action buttons in the form header.\n   Forms have a built-in standard set of buttons, so if you modify them you should also specify this option.\"\n  :com.fulcrologic.rad.form/action-buttons)\n\n(def query-inclusion\n  \"Form option. A vector of EQL that will be appended to the component's query. Usually used to add `:ui/???` props for use with\n   hand-rendered UI. See `initialize-ui-props`.\n\n   NOTES:\n   * The query elements will be included in the server query to LOAD existing items; however, NO I/O is done on these\n     during create, since new items do not come from the server! If you always need to load something in your\n     query inclusion (e.g. options needed to render the form) you will need to augment the form state machine with\n     `fo/machine`.\n   * If you use joins in the query inclusion, they will not support dynamic queries.\n   \"\n  :com.fulcrologic.rad.form/query-inclusion)\n\n(def default-value\n  \"Attribute option. The default value for this attribute when created in a new\n  form. Can be a literal value or a `(fn [form-options attr] value)`. Placed on an attribute to specify a default value.\"\n  :com.fulcrologic.rad.form/default-value)\n\n(def default-values\n  \"Form option. A map from qualified key to a value, or a `(fn [form-options attr] {k v})`.\n\n   Overrides the ::form/default-value that can be placed on an attrubute.\"\n  :com.fulcrologic.rad.form/default-values)\n\n(def subforms\n  \"Form option. A map from qualified key to a sub-map that describes details for what to use when a form attribute is a ref.\n\n   The value of this option can be a map from keyword to submap, where the submap can instead be a\n   `(fn [form-component-options ref-attr] optionsmap)`.\n\n  Typical entries to the submap include:\n\n  * `fo/ui` - A form class that will be used to render the subform\n  * `po/*` - Picker options for pick-* style references\n\n  Other entries are plugin-dependent. See `picker-options` for cases where a relationship is one where the parent\n  form simply picks pre-existing things.\n\n  Use `fo/subform-options` as a helper function to properly get subform options in production code.\n\n  E.g.\n\n  ```\n  (defsc-form Person [this props]\n   {...\n    fo/subforms {:person/address {fo/ui Address}}))\n\n  (defsc-form Person [this props]\n   {...\n    fo/subforms {:person/address (fn [form-component-options attr]\n                                    (assert (= (ao/qualified-key attr) :person/address))\n                                    {fo/ui Address})}))\n  ```\n  \"\n  :com.fulcrologic.rad.form/subforms)\n\n(defoption subform\n  \"Attribute option for ref attributes. Defines the subform options. See fo/subforms.\n\n   Can be a map of subform options or a `(fn [form-instance ref-attr] options-map)`.\n\n   E.g.\n\n  ```\n  (defattr person-address :person/address :ref\n   {fo/subform {fo/ui :com.example.ui.address/AddressForm}})\n\n  (defattr person-address :person/address :ref\n   {fo/subform (fn [form-instance ref-attr] {fo/ui :com.example.ui.address/AddressForm})})\n  ```\n\n  Use `fo/subform-options` as a helper function to properly get subform options in production code.\n   \")\n\n(def layout-styles\n  \"Form option. A map whose keys name a container element and whose value indicates a desired style.\n\n   Render plugins (and your own customizations) can customize the elements and styles available, so\n   see your rendering plugin for details.\"\n  :com.fulcrologic.rad.form/layout-styles)\n\n(def validation-messages\n  \"Form option. A map whose keys are qualified-keys, and whose values are strings or `(fn [props qualified-key] string?)` to generate\n  the validation message.  A default value for these can be given by putting ::form/validation-message\n  on the attribute itself, which has a different signature.\"\n  :com.fulcrologic.rad.form/validation-messages)\n\n(def validation-message\n  \"Attribute option. Specify a default validation message for an attribute.\n  Can either be a string or a `(fn [value] string?)`.\"\n  :com.fulcrologic.rad.form/validation-message)\n\n(def triggers\n  \"Custom handlers in the form state lifecycle that can do tasks at particular times and affect form state.\n\n  * `:derive-fields` - A `(fn [props] new-props)` that can rewrite any of the props on the form (as a tree). This\n  function is allowed to look into subforms, and even generate new members (though it must be careful to add\n  form config if it does so). The `new-props` must be a tree of props that matches the correct shape of the form\n  and is non-destructive to the form config and other non-field attributes on that tree.\n\n  * `:on-change` - Called when an individual field changes. A `(fn [uism-env form-ident qualified-key old-value new-value] uism-env)`.\n  The change handler has access to the UISM env (which contains `::uism/fulcro-app` and `::uism/state-map`). This\n  function is allowed to side-effect (trigger loads for dependent dropdowns, etc.). It must return\n  the (optionally updated) `uism-env`. This means you can trigger state machine events, and use the various\n  facilities of UISM to accomplish your tasks. If you define your own custom state machine this can be useful for\n  triggering very complex behavior. Typically you'll do something like\n  `(uism/apply-action uism-env assoc-in (conj form-ident :line-item/quantity) 1)` to update the form state. See UISM\n  documentation for more details.\n\n  * `:started` - A (fn [uism-env ident]). Called after the form has been initialized. Note, new instances (create) will\n    have a tempid. Edits will have issued a load on the form, so if you're trying to load things that are in query\n    inclusions (that have a global resolver) then you only need to do so if the entity is new.  Must return UISM env.\n  * `:saved` - A (fn [uism-env ident]). Called after a successful save. Must return a UISM env.\n  * `:save-failed` - A (fn [uism-env ident]). Called after a failed save. Must return a UISM env.\n  * `:started` - A `(fn [uism-env ident])`. Called as a form starts (state machine started, but load may still be in progress).\n  \"\n  :com.fulcrologic.rad.form/triggers)\n\n(def enumerated-labels\n  \"A map from qualified key of a form field to the string to use for it. May be a `(fn [] string?)`.\n   Overrides ::attr/enumerated-labels.\"\n  :com.fulcrologic.rad.form/enumerated-labels)\n\n(def field-label\n  \"Attribute option. String or `(fn [form-instance] string-or-element)`. Rendering plugins may require a string return\n  value.\n\n  Placing this on an attribute indicates a default for the label for the attribute on forms. The default is a\n  capitalized version of the attribute's key. See also `field-labels`.\"\n  :com.fulcrologic.rad.form/field-label)\n\n(def ui\n  \"Used within `subform` or `subforms`. This should be the Form component that will be used to render instances of\n   the subform.\n\n   Can be one of: A component, component registry key, or `(fn [form-options ref-key] comp-or-reg-key)`\"\n  :com.fulcrologic.rad.form/ui)\n\n(def field-style-config\n  \"Attribute option: A map of options that are used by the rendering plugin to augment the style of a rendered input.\n  Such configuration options are really up to the render plugin, but could include things like `:input/props` as\n  additional DOM k/v pairs to put on the input.\"\n  :com.fulcrologic.rad.attributes/field-style-config)\n\n(def input-props\n  \"A key that can be included WITHIN `field-style-config`(s).  A HINT to the field renderer that the given additional\n  props should be included on the low-level input.  Renderers may define additional keys for further customization. In\n  general you should *not* use this to attempt to mess with the input's value of value event handlers. The value of\n  this option can be a map or a `(fn [form-env] map?)`. In general `:value`, `:onBlur`, `:onChange`, and `:onFocus`\n  will be ignored by the underlying renderer, since it will likely provide its own setting for those.\"\n  :input/props)\n\n(def field-style-configs\n  \"A map from field *keyword* to a map of options that are used by the rendering plugin to augment the style of a rendered input.\n  Such configuration options are really up to the render plugin, but could include things like `:input/props` as\n  additional DOM k/v pairs to put on the input.\"\n  :com.fulcrologic.rad.form/field-style-configs)\n\n(def sort-children\n  \"This option goes *within* ::subforms and defines how to sort those subform UI components when there are more\n  than one. It is a `(fn [denormalized-children] sorted-children)`.\n\n  For example, a form might have:\n\n  ```\n  {fo/subforms {:person/children {fo/ui PersonForm\n                                  fo/sort-children (fn [children] (sort-by :person/name children))}\n  ```\n  \"\n  :com.fulcrologic.rad.form/sort-children)\n\n(def read-only-fields\n  \"A set of keywords, or a `(fn [form-instance] set?)`. Any form fields that appear in the set will be shown\n   as read-only values in the form\"\n  :com.fulcrologic.rad.form/read-only-fields)\n\n(def read-only?\n  \"Used to indicate whether *everything* in the form should be treated as read-only.\n   This option is a boolean or a `(fn [form-instance] boolean?)`.\n   If true, `read-only-fields` will be ignored.\"\n  :com.fulcrologic.rad.form/read-only?)\n\n(def can-delete?\n  \"Used in `subforms` maps to control when a child can be deleted.\n   This option is a boolean or a `(fn [parent-form-instance row-props] boolean?)`.\n   that is used to determine if the given child can be deleted by the user.\"\n  :com.fulcrologic.rad.form/can-delete?)\n\n(def can-add?\n  \"Used in `subforms` maps to control when a child of that type can be added across its relation.\n   This option is a boolean or a `(fn [form-instance attribute] boolean?)` that is used to determine if the\n   given child (reachable through `attribute` (a ref attribute)) can be added as a child to `form-instance`.\n\n   NOTE: You can return the truthy value `:prepend` from this function to ask the form to put new children at the top\n   of the list.\"\n  :com.fulcrologic.rad.form/can-add?)\n\n(def machine\n  \"Override the state machine definition that is used to control this form. Defaults to form/form-machine, which\n   you can use as a basis of your replacement (a state machine definition is just a map).\"\n  :com.fulcrologic.rad.form/machine)\n\n(def debug?\n  \"Indicate a desire to show debug information about the form. Requires support from the rendering plugin.\"\n  :com.fulcrologic.rad.form/debug?)\n\n(def initialize-ui-props\n  \"Form-only option, meant for setting up additinal component state (particularly `:ui/???` props that were added\n   in a query inclusion) when the form is created or loaded.\n\n   Either a map or a `(fn [FormClass props] props)` that, when present, is called when an instance of this\n   form is either loaded or created. NOTE: The resulting merge is SHALLOW, and cannot mess with subforms in *any* way.\n   If you want to affect a subform, then you MUST include this option on that subform (instead of trying to reach deeper in props).\n\n   NOTE: It is possible for this function to be called more than once on a given form, so it should not side-effect.\n\n   See `query-inclusion`.\n   \"\n  :com.fulcrologic.rad.form/initialize-ui-props)\n\n(def save-mutation\n  \"A *symbol* that represents the server-side mutation that will be invoked on a save. Defaults to\n   `com.fulcrologic.rad.form/save-form`. Used in cases where you want to bypass the default RAD form save handler\n   and middleware in order to do something non-standard with the data from the form.\"\n  :com.fulcrologic.rad.form/save-mutation)\n\n(def save-params\n  \"A map of data OR a `(fn [form-rendering-env] map?)`. This data will be included in the form parameters sent\n   to the save mutation on the remote. These will be merged with the default parameters such as `::form/delta`.\"\n  :com.fulcrologic.rad.form/save-params)\n\n(def silent-abandon?\n  \"Form-only option. A boolean or `(fn [master-form-instance] boolean?)`. This is checked when navigation attempts\n   to move away from the form. If it returns true, then any unsaved changes will be abandoned (reset in Fulcro state to\n   their original values) and the navigation will be allowed.\"\n  :com.fulcrologic.rad.form/silent-abandon?)\n\n(def add-label\n  \"Subform option (placed on any form that might be used as a subform). A string or\n   `(fn [ui-cls add-child!] string-or-dom-element)` that represents the label to use when an add button is generated\n   for to-one or to-many relations of that form.\n\n   The `ui-cls` will be the component class for which a label is desired, and the `add-child!` is a no-arg function to\n   call when you want to add a child.\n\n   IF your function returns a DOM element, then that DOM element must call the provided (no-arg) `add-child!` function when it is\n   triggered.\n  \"\n  :com.fulcrologic.rad.form/add-label)\n\n(def show-header?\n  \"Form-only option. A boolean or `(fn [master-form-instance] boolean?)`. Default true. Turns on/off the title/controls.\n   Useful when embedding a form in some other container. Can also be passed in the computed props of a top-level form\n   factory for contextual hiding of the header.\"\n  :com.fulcrologic.rad.form/show-header?)\n\n(defoption omit-label?\n  \"Attribute or Form option.  A HINT to field renderers that they should not put a label on the field.\n\n   On a form, it must be a map from keywords to booleans or (fn [this attr] boolean). On\n   an attribute it is just a boolean or the fn. \")\n\n(def confirm\n  \"Form option.  Specifies the method of confirming an attempt to abandon unsaved changes.\n\n   It can EITHER be:\n\n   * A SYNCHRONOUS `(fn [msg] boolean?)` that, if defined, is called in order to decide if it is ok to abandon unsaved\n     changes.\n   * The keyword `:async`.\n\n   It defaults to js/confirm.\n\n\n   The `:async` case indicates that the state machine should set `:ui/route-denied?` to true in the form's props,\n   and your rendering code will then need to show the appropriate options.\n\n   You can then, at any point in the future, send one of two events to the state machine to proceed:\n\n   * :event/clear-route-denied will simply clear the flag.\n   * :event/continue-routing will abandon the unsaved form changes and do the routing operation away from the form.\n\n   Two helper functions exist for these two operations (clear-route-denied! and continue-routing!).\n  \"\n  :com.fulcrologic.rad.form/confirm)\n\n(defn subform-options\n  \"Use form/subform-options instead.\"\n  ([form-options]\n   (let [ref-attrs (filterv #(= :ref (ao/type %)) (attributes form-options))]\n     (reduce\n       (fn [acc attr]\n         (let [opts (subform-options form-options attr)]\n           (if (seq opts)\n             (assoc acc (ao/qualified-key attr) opts)\n             acc)))\n       {}\n       ref-attrs)))\n  ([form-options ref-attr-or-key]\n   (let [k->a         (:com.fulcrologic.rad.form/key->attribute form-options)\n         ref-attr     (cond-> ref-attr-or-key\n                        (keyword? ref-attr-or-key) k->a)\n         k            (ao/qualified-key ref-attr)\n         form-options (?! (get-in form-options [subforms k]) form-options ref-attr)\n         raw-options  (or form-options (?! (subform ref-attr) form-options ref-attr))]\n     (cond-> raw-options\n       (contains? raw-options ui) (update ui (fn [c]\n                                               (some-> (?! c form-options k) (rc/registry-key->class))))))))\n\n(defn get-field-options\n  \"Use form/get-field-options instead.\"\n  ([form-options]\n   (reduce\n     (fn [acc attr]\n       (let [opts (get-field-options form-options attr)]\n         (if (seq opts)\n           (assoc acc (ao/qualified-key attr) opts)\n           acc)))\n     {}\n     (attributes form-options)))\n  ([form-options attr-or-key]\n   (let [k->a         (:com.fulcrologic.rad.form/key->attribute form-options)\n         attr         (cond-> attr-or-key\n                        (keyword? attr-or-key) k->a)\n         k            (ao/qualified-key attr)\n         form-options (?! (get-in form-options [field-options k]) form-options attr)]\n     (or form-options (?! (field-options attr) form-options attr)))))\n\n(defn get-default-value\n  \"Get the default value for `attr` in  the form-options context. Properly looks for the default value in\n   the form, on the attribute, and in subform options. Also checks if the value is a fn, and properly runs it\n   if so.\"\n  [form-options attribute]\n  (let [k             (ao/qualified-key attribute)\n        default-value (default-value attribute)\n        sfoptions     (subform-options form-options attribute)\n        SubForm       (?! (ui sfoptions) form-options k)]\n    (or\n      (?! (get-in form-options [default-values k]) form-options attribute)\n      (?! (default-values (subform-options form-options attribute)) form-options attribute)\n      (?! (get-in (some-> SubForm rc/component-options) [default-values k]) form-options attribute)\n      (?! default-value form-options attribute))))\n"]}