{"version":3,"sources":["com/fulcrologic/fulcro/react/hooks.cljc"],"mappings":"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","names":["com.fulcrologic.fulcro.react.hooks/useState","initial-value","js/module$node_modules$react$index.useState","com.fulcrologic.fulcro.react.hooks/use-state","cljs.core.into_array","var_args","G__91548","com.fulcrologic.fulcro.react.hooks/useEffect","js/Error","f","js/module$node_modules$react$index.useEffect","js-deps","com.fulcrologic.fulcro.react.hooks/use-context","ctx","js/module$node_modules$react$index.useContext","G__91550","com.fulcrologic.fulcro.react.hooks/use-reducer","reducer","initial-arg","js/module$node_modules$react$index.useReducer","init","G__91552","com.fulcrologic.fulcro.react.hooks/use-callback","cb","js/module$node_modules$react$index.useCallback","args","cljs.core/to-array","G__91554","com.fulcrologic.fulcro.react.hooks/use-memo","value-factory-fn","js/module$node_modules$react$index.useMemo","dependencies","G__91556","com.fulcrologic.fulcro.react.hooks/use-ref","js/module$node_modules$react$index.useRef","value","com.fulcrologic.fulcro.react.hooks/use-imperative-handle","ref","js/module$node_modules$react$index.useImperativeHandle","G__91558","com.fulcrologic.fulcro.react.hooks/use-layout-effect","js/module$node_modules$react$index.useLayoutEffect","G__91560","com.fulcrologic.fulcro.react.hooks/use-debug-value","js/module$node_modules$react$index.useDebugValue","formatter","com.fulcrologic.fulcro.react.hooks/use-deferred-value","js/module$node_modules$react$index.useDeferredValue","com.fulcrologic.fulcro.react.hooks/use-transition","js/module$node_modules$react$index.useTransition","com.fulcrologic.fulcro.react.hooks/use-id","js/module$node_modules$react$index.useId","G__91562","com.fulcrologic.fulcro.react.hooks/use-sync-external-store","subscribe","get-snapshot","get-server-ss","js/module$node_modules$react$index.useSyncExternalStore","com.fulcrologic.fulcro.react.hooks/use-insertion-effect","didUpdate","js/module$node_modules$react$index.useInsertionEffect","id","com.fulcrologic.fulcro.algorithms.tempid.uuid","com.fulcrologic.fulcro.react.hooks/use-generated-id","com.fulcrologic.fulcro.react.hooks/use-gc","this-or-app","ident","edges","com.fulcrologic.fulcro.react.hooks.useEffect","state","com.fulcrologic.fulcro.components/any->app","cljs.core.swap_BANG_","com.fulcrologic.fulcro.algorithms.normalized-state/remove-entity","initial-mount-state","componentName","cljs.core.keyword","cljs.core.gensym","p__91563","map__91564","cljs.core/--destructure-map","cljs.core.get","com.fulcrologic.fulcro.react.hooks/use-fulcro-mount","parent-this","child-class","initial-state-params","st","pass-through-props","cljs.core.atom","key-and-root","setRoot!","_","join-key","child-factory","com.fulcrologic.fulcro.components.computed_factory","initial-state","G__91565","G__91566","com.fulcrologic.fulcro.components/get-initial-state","or__5045__auto__","cls","com.fulcrologic.fulcro.components/configure-hooks-component!","this","fulcro-props","com.fulcrologic.fulcro.rendering.multiple_roots_renderer.register_root_BANG_","com.fulcrologic.fulcro.rendering.multiple_roots_renderer.deregister_root_BANG_","parent__50736__auto__","app__50737__auto__","com.fulcrologic.fulcro.components/*app*","s__50738__auto__","com.fulcrologic.fulcro.components.shared","p__50739__auto__","com.fulcrologic.fulcro.components/*parent*","*app*-orig-val__91567","*shared*-orig-val__91568","com.fulcrologic.fulcro.components/*shared*","*parent*-orig-val__91569","*app*-temp-val__91570","*shared*-temp-val__91571","*parent*-temp-val__91572","G__91573","G__91574","cljs.core/deref","com.fulcrologic.fulcro.components.get_query","real-factory","com.fulcrologic.fulcro.components.factory","factory","props","cljs.core/reset!","G__91575","G__91576","cljs.core/dissoc","com.fulcrologic.fulcro.react.hooks/pcs","app","component","prior-props-tree-or-ident","edn-query-language.core/ident?","com.fulcrologic.fulcro.components/get-ident","state-map","com.fulcrologic.fulcro.raw.application/current-state","starting-entity","cljs.core.get_in","query","com.fulcrologic.fulcro.algorithms.denormalize/db->tree","com.fulcrologic.fulcro.react.hooks/use-db-lifecycle","current-props-tree","set-state!","vec__91577","cljs.core.nth","cljs.core/random-uuid","exists?","cljs.core/map?","com.fulcrologic.fulcro.algorithms.merge/merge-component!","com.fulcrologic.fulcro.raw.application/add-render-listener!","com.fulcrologic.fulcro.raw.application/remove-render-listener!","p__91580","map__91581","com.fulcrologic.fulcro.react.hooks/use-component","initialize?","initial-params","keep-existing?","options","vec__91582","prior-props-ref","com.fulcrologic.fulcro.react.hooks.use_ref","get-props","com.fulcrologic.fulcro.raw.components/get-traced-props","current-props","set-props!","initial-entity","initial-ident","com.fulcrologic.fulcro.raw.components.get_ident","com.fulcrologic.fulcro.raw.application/maybe-merge-new-component!","initial-props","current-ident","listener-id","cljs.core/hash","p__91585","map__91586","com.fulcrologic.fulcro.react.hooks/use-root","root-key","vec__91587","com.fulcrologic.fulcro.raw.application/get-root-subtree-props","com.fulcrologic.fulcro.raw.application/maybe-merge-new-root!","com.fulcrologic.fulcro.raw.application/remove-root!","com.fulcrologic.fulcro.react.hooks/use-uism","state-machine-definition","vec__91590","uism-data","set-uism-data!","com.fulcrologic.fulcro.ui-state-machines/current-state-and-actors","com.fulcrologic.fulcro.application/current-state","com.fulcrologic.fulcro.ui-state-machines/add-uism!","cljs.core.dissoc","com.fulcrologic.fulcro.ui-state-machines/remove-uism!"],"sourcesContent":["(ns com.fulcrologic.fulcro.react.hooks\n  \"React hooks wrappers and helpers. The wrappers are simple API simplifications that help when using hooks from\n   Clojurescript, but this namespace also includes utilities for using Fulcro's data/network management from raw React\n   via hooks.\n\n   See `use-root`, `use-component`, and `use-uism`.\"\n  #?(:cljs\n     (:require-macros [com.fulcrologic.fulcro.react.hooks :refer [use-effect use-lifecycle]]))\n  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n  ;; WARNING TO MAINTAINERS: DO NOT REFERENCE DOM IN HERE. This has to work with native.\n  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n  (:require\n    [com.fulcrologic.fulcro.algorithms.tempid :as tempid]\n    #?(:cljs [\"react\" :as react])\n    [com.fulcrologic.fulcro.components :as comp]\n    [com.fulcrologic.fulcro.raw.components :as rc]\n    [com.fulcrologic.fulcro.raw.application :as rapp]\n    [com.fulcrologic.fulcro.algorithms.denormalize :as fdn]\n    [com.fulcrologic.fulcro.algorithms.merge :as merge]\n    [com.fulcrologic.fulcro.ui-state-machines :as uism]\n    [com.fulcrologic.fulcro.rendering.multiple-roots-renderer :as mrr]\n    [com.fulcrologic.fulcro.algorithms.normalized-state :as fns]\n    [edn-query-language.core :as eql]\n    [taoensso.encore :as enc]\n    [taoensso.timbre :as log]\n    [com.fulcrologic.fulcro.application :as app])\n  #?(:clj (:import (cljs.tagged_literals JSValue))))\n\n(defn useState\n  \"A simple CLJC wrapper around React/useState. Returns a JS vector for speed. You probably want use-state, which is more\n  convenient.\n\n  React docs: https://reactjs.org/docs/hooks-reference.html#usestate\"\n  [initial-value]\n  #?(:cljs (react/useState initial-value)))\n\n(defn use-state\n  \"A simple wrapper around React/useState. Returns a cljs vector for easy destructuring.\n\n  `initial-value` can be a function.\n\n  React docs: https://reactjs.org/docs/hooks-reference.html#usestate\"\n  [initial-value]\n  #?(:cljs (into-array (react/useState initial-value))))\n\n(defn useEffect\n  \"A CLJC wrapper around js/React.useEffect that does NO conversion of\n  dependencies. You probably want the macro use-effect instead.\n\n  React docs: https://reactjs.org/docs/hooks-reference.html#useeffect\"\n  ([f]\n   #?(:cljs (react/useEffect f)))\n  ([f js-deps]\n   #?(:cljs (react/useEffect f js-deps))))\n\n#?(:clj\n   (defmacro use-effect\n     \"A simple macro wrapper around React/useEffect that does compile-time conversion of `dependencies` to a js-array\n     for convenience without affecting performance.\n\n      React docs: https://reactjs.org/docs/hooks-reference.html#useeffect\"\n     ([f]\n      `(useEffect ~f))\n     ([f dependencies]\n      (if (enc/compiling-cljs?)\n        (let [deps (cond\n                     (nil? dependencies) nil\n                     (instance? JSValue dependencies) dependencies\n                     :else (JSValue. dependencies))]\n          `(useEffect ~f ~deps))\n        `(useEffect ~f ~dependencies)))))\n\n(defn use-context\n  \"A simple wrapper around the RAW React/useContext. You should probably prefer the context support from c.f.f.r.context.\"\n  [ctx]\n  #?(:cljs (react/useContext ctx)))\n\n(defn use-reducer\n  \"A simple wrapper around React/useReducer. Returns a cljs vector for easy destructuring\n\n  React docs: https://reactjs.org/docs/hooks-reference.html#usecontext\"\n  ([reducer initial-arg]\n   #?(:cljs (into-array (react/useReducer reducer initial-arg))))\n  ([reducer initial-arg init]\n   #?(:cljs (into-array (react/useReducer reducer initial-arg init)))))\n\n(defn use-callback\n  \"A simple wrapper around React/useCallback. Converts args to js array before send.\n\n  React docs: https://reactjs.org/docs/hooks-reference.html#usecallback\"\n  ([cb]\n   #?(:cljs (react/useCallback cb)))\n  ([cb args]\n   #?(:cljs (react/useCallback cb (to-array args)))))\n\n(defn use-memo\n  \"A simple wrapper around React/useMemo. Converts args to js array before send.\n\n   NOTE: React does NOT guarantee it won't re-create the value during the lifetime of the\n   component, so it is sorta crappy in terms of actual memoization. Purely for optimizations, not\n   for guarantees.\n\n  React docs: https://reactjs.org/docs/hooks-reference.html#usememo\"\n  ([value-factory-fn]\n   #?(:cljs (react/useMemo value-factory-fn)))\n  ([value-factory-fn dependencies]\n   #?(:cljs (react/useMemo value-factory-fn (to-array dependencies)))))\n\n(defn use-ref\n  \"A simple wrapper around React/useRef.\n\n  React docs: https://reactjs.org/docs/hooks-reference.html#useref\"\n  ([] #?(:cljs (react/useRef nil)))\n  ([value] #?(:cljs (react/useRef value))))\n\n(defn use-imperative-handle\n  \"A simple wrapper around React/useImperativeHandle.\n\n  React docs: https://reactjs.org/docs/hooks-reference.html#useimperativehandle\"\n  [ref f]\n  #?(:cljs (react/useImperativeHandle ref f)))\n\n(defn use-layout-effect\n  \"A simple wrapper around React/useLayoutEffect.\n\n  React docs: https://reactjs.org/docs/hooks-reference.html#uselayouteffect\"\n  ([f]\n   #?(:cljs (react/useLayoutEffect f)))\n  ([f args]\n   #?(:cljs (react/useLayoutEffect f (to-array args)))))\n\n(defn use-debug-value\n  \"A simple wrapper around React/useDebugValue.\n\n  React docs: https://reactjs.org/docs/hooks-reference.html#uselayouteffect\"\n  ([value]\n   #?(:cljs (react/useDebugValue value)))\n  ([value formatter]\n   #?(:cljs (react/useDebugValue value formatter))))\n\n(defn use-deferred-value\n  \"A simple wrapper around React/useDeferredValue.\n\n  React docs: https://reactjs.org/docs/hooks-reference.html#usedeferredvalue\"\n  [value]\n  #?(:cljs (react/useDeferredValue value)))\n\n(defn use-transition\n  \"A simple wrapper around React/useTransition.\n\n  React docs: https://reactjs.org/docs/hooks-reference.html#usetransition\"\n  [value]\n  #?(:cljs (into-array (react/useTransition value))))\n\n(defn use-id\n  \"A simple wrapper around React/useId. See also use-generated-id, which is a Fulcro-specific function for generating\n   random uuids.\n\n  React docs: https://reactjs.org/docs/hooks-reference.html#useid\"\n  []\n  #?(:cljs (react/useId)))\n\n(defn use-sync-external-store\n  \"A simple wrapper around React/useSyncExternalStore.\n\n  React docs: https://reactjs.org/docs/hooks-reference.html#usesyncexternalstore\"\n  ([subscribe get-snapshot get-server-ss]\n   #?(:cljs (react/useSyncExternalStore subscribe get-snapshot get-server-ss)))\n  ([subscribe get-snapshot]\n   #?(:cljs (react/useSyncExternalStore subscribe get-snapshot))))\n\n(defn use-insertion-effect\n  \"A simple wrapper around React/useInsertionEffect.\n\n  React docs: https://reactjs.org/docs/hooks-reference.html#useinsertioneffect\"\n  [didUpdate]\n  #?(:cljs (react/useInsertionEffect didUpdate)))\n\n#?(:clj\n   (defmacro use-lifecycle\n     \"A macro shorthand that evaluates to low-level js at compile time for\n     `(use-effect (fn [] (when setup (setup)) (when teardown teardown)) [])`\"\n     ([setup] `(use-lifecycle ~setup nil))\n     ([setup teardown]\n      (cond\n        (and setup teardown) `(use-effect (fn [] (~setup) ~teardown) [])\n        setup `(use-effect (fn [] (~setup) ~(when (enc/compiling-cljs?) 'js/undefined)) [])\n        teardown `(use-effect (fn [] ~teardown) [])))))\n\n(let [id (fn [] (tempid/uuid))]\n  (defn use-generated-id\n    \"Returns a constant ident with a generated ID component.\"\n    []\n    (aget (useState id) 0)))\n\n(defn use-gc\n  \"Effect handler. Creates an effect that will garbage-collect the given ident from fulcro app state on cleanup, and\n  will follow any `edges` (a set of keywords) and remove any things pointed through those keywords as well. See\n  normalized-state's `remove-entity`.\n\n  ```\n  (defsc NewRoot [this props]\n    {:use-hooks? true}\n    (let [generated-id (hooks/use-generated-id)\n          f (use-fulcro-mount this {:child-class SomeChild\n                                    :initial-state-params {:id generated-id})]\n      ;; will garbage-collect the floating root child on unmount\n      (use-gc this [:child/id generated-id] #{})\n      (f props)))\n  ```\n  \"\n  [this-or-app ident edges]\n  (use-lifecycle\n    nil\n    (fn []\n      (let [state (-> this-or-app comp/any->app :com.fulcrologic.fulcro.application/state-atom)]\n        (swap! state fns/remove-entity ident edges)))))\n\n(let [initial-mount-state (fn []\n                            (let [componentName (keyword \"com.fulcrologic.fulcro.floating-root\" (gensym \"generated-root\"))]\n                              #?(:clj [componentName nil] :cljs #js [componentName nil])))]\n  (defn use-fulcro-mount\n    \"\n    NOTE: In many cases you are better off using the other hooks support in this ns, such as `use-component`, since\n    they do not have a render integration requirement.\n\n    Generate a new sub-root that is controlled and rendered by Fulcro's multi-root-renderer.\n\n    ```\n    ;; important, you must use hooks (`defhc` or `:use-hooks? true`)\n    (defsc NewRoot [this props]\n      {:use-hooks? true}\n      (let [f (use-fulcro-mount this {:child-class SomeChild})]\n        ;; parent props will show up in SomeChild as computed props.\n        (f props)))\n    ```\n\n    WARNING: Requires you use multi-root-renderer.\"\n    [parent-this {:keys [child-class\n                         initial-state-params]}]\n    ;; factories are functions, and if you pass a function to setState it will run it, which is NOT what we want...\n    (let [st                 (useState initial-mount-state)\n          pass-through-props (atom {})\n          key-and-root       (aget st 0)\n          setRoot!           (aget st 1)\n          _                  (use-lifecycle\n                               (fn []\n                                 (let [join-key      (aget key-and-root 0)\n                                       child-factory (comp/computed-factory child-class)\n                                       initial-state (comp/get-initial-state child-class (or initial-state-params {}))\n                                       cls           (comp/configure-hooks-component!\n                                                       (fn [this fulcro-props]\n                                                         (use-lifecycle\n                                                           (fn [] (mrr/register-root! this))\n                                                           (fn [] (mrr/deregister-root! this)))\n                                                         (comp/with-parent-context parent-this\n                                                           (child-factory (get fulcro-props join-key initial-state) @pass-through-props)))\n                                                       {:query         (fn [_] [{join-key (comp/get-query child-class)}])\n                                                        :initial-state (fn [_] {join-key initial-state})\n                                                        :componentName join-key})\n                                       real-factory  (comp/factory cls {:keyfn (fn [_] join-key)})\n                                       factory       (fn [props]\n                                                       (reset! pass-through-props props)\n                                                       (real-factory {}))]\n                                   (setRoot! #?(:clj [join-key factory] :cljs #js [join-key factory]))))\n                               (fn []\n                                 (let [join-key (aget key-and-root 0)\n                                       state    (-> parent-this comp/any->app :com.fulcrologic.fulcro.application/state-atom)]\n                                   (swap! state dissoc join-key))))]\n      (aget key-and-root 1))))\n\n(defn- pcs [app component prior-props-tree-or-ident]\n  (let [ident           (if (eql/ident? prior-props-tree-or-ident)\n                          prior-props-tree-or-ident\n                          (comp/get-ident component prior-props-tree-or-ident))\n        state-map       (rapp/current-state app)\n        starting-entity (get-in state-map ident)\n        query           (comp/get-query component state-map)]\n    (fdn/db->tree query starting-entity state-map)))\n\n(defn- use-db-lifecycle [app component current-props-tree set-state!]\n  (let [[id _] (use-state #?(:cljs (random-uuid) :clj (java.util.UUID/randomUUID)))]\n    (use-lifecycle\n      (fn []\n        (let [state-map (rapp/current-state app)\n              ident     (comp/get-ident component current-props-tree)\n              exists?   (map? (get-in state-map ident))]\n          (when-not exists?\n            (merge/merge-component! app component current-props-tree))\n          (rapp/add-render-listener! app id\n            (fn [app _]\n              (let [props (pcs app component ident)]\n                (set-state! props))))))\n      (fn [] (rapp/remove-render-listener! app id)))))\n\n(defn use-component\n  \"Use Fulcro from raw React. This is a Hook effect/state combo that will connect you to the transaction/network/data\n  processing of Fulcro, but will not rely on Fulcro's render. Thus, you can embed the use of the returned props in any\n  stock React context. Technically, you do not have to use Fulcro components for rendering, but they are necessary to define the\n  query/ident/initial-state for startup and normalization. You may also use this within normal (Fulcro)\n  components to generate dynamic components on-the-fly (see `nc`).\n\n  The arguments are:\n\n  `app` - A Fulcro app\n  `component` - A component with query/ident. Queries MUST have co-located normalization info. You\n              can create this with normal `defsc` or as an anonymous component via `raw.components/nc`.\n  `options` - A map of options, containing:\n    * `:initial-params` - The parameters to use when getting the initial state of the component. See `comp/get-initial-state`.\n      If no initial state exists on the top-level component, then an empty map will be used. This will mean your props will be\n      empty to start.\n    * `initialize?` - A boolean (default true). If true then the initial state of the component will be used to pre-populate the component's state\n      in the app database.\n    * `:keep-existing?` - A boolean. If true, then the state of the component will not be initialized if there\n      is already data at the component's ident (which will be computed using the initial state params provided, if\n      necessary).\n    * `:ident` - Only needed if you are NOT initializing state, AND the component has a dynamic ident.\n\n  Returns the props from the Fulcro database. The component using this function will automatically refresh after Fulcro\n  transactions run (Fulcro is not a watched-atom system. Updates happen at transaction boundaries).\n\n  MAY return nil if no data is at that component's ident.\n\n  See also `use-root`.\n  \"\n  [app component\n   {:keys [initialize? initial-params keep-existing?]\n    :or   {initial-params {}}\n    :as   options}]\n  #?(:cljs\n     (let [prior-props-ref (use-ref nil)\n           get-props       (fn [ident]\n                             (rc/get-traced-props (rapp/current-state app) component\n                               ident\n                               (.-current prior-props-ref)))\n           [current-props\n            set-props!] (use-state\n                          (fn initialize-component-state []\n                            (let [initial-entity (comp/get-initial-state component initial-params)\n                                  initial-ident  (or (:ident options) (rc/get-ident component initial-entity))]\n                              (rapp/maybe-merge-new-component! app component initial-entity options)\n                              (let [initial-props (get-props initial-ident)]\n                                (set! (.-current prior-props-ref) initial-props)\n                                initial-props))))\n           current-ident   (or (:ident options) (rc/get-ident component current-props))]\n       (use-effect\n         (fn [] (let [listener-id (random-uuid)]\n                  (rapp/add-render-listener! app listener-id\n                    (fn [app _]\n                      (let [props (get-props current-ident)]\n                        (when-not (identical? (.-current prior-props-ref) props)\n                          (set! (.-current prior-props-ref) props)\n                          (set-props! props)))))\n                  (fn use-tree-remove-render-listener* []\n                    (rapp/remove-render-listener! app listener-id)\n                    (set! (.-current prior-props-ref) nil))))\n         [(hash current-ident)])\n       current-props)))\n\n(defn use-root\n  \"Use a root key and component as a subtree managed by Fulcro from raw React. The `root-key` must be a unique\n   (namespace recommended) key among all keys used within the application, since the root of the database is where it\n   will live.\n\n   The `component` should be a real Fulcro component or a generated normalizing component from `nc` (or similar).\n\n   Returns the props (not including `root-key`) that satisfy the query of `component`. MAY return nil if no data is available.\n\n   See also `use-component`.\n  \"\n  [app root-key component {:keys [initialize? keep-existing? initial-params] :as options}]\n  (let [prior-props-ref (use-ref nil)\n        get-props       #(rapp/get-root-subtree-props app root-key component (.-current prior-props-ref))\n        [current-props set-props!] (use-state (fn []\n                                                (rapp/maybe-merge-new-root! app root-key component options)\n                                                (let [initial-props (get-props)]\n                                                  (set! (.-current prior-props-ref) initial-props)\n                                                  initial-props)))]\n    (use-lifecycle\n      (fn [] (rapp/add-render-listener! app root-key (fn use-root-render-listener* [app _]\n                                                       (let [props (get-props)]\n                                                         (when-not (identical? (.-current prior-props-ref) props)\n                                                           (set! (.-current prior-props-ref) props)\n                                                           (set-props! props))))))\n      (fn use-tree-remove-render-listener* [] (rapp/remove-root! app root-key)))\n    (get current-props root-key)))\n\n(defn use-uism\n  \"Use a UISM as an effect hook. This will set up the given state machine under the given ID, and start it (if not\n   already started). Your initial state handler MUST set up actors and otherwise initialize based on options.\n\n   If the machine is already started at the given ID then this effect will send it an `:event/remounted` event.\n\n   You MUST include `:componentName` in each of your actor's normalizing component options (e.g. `(nc query {:componentName ::uniqueName})`)\n   because UISM requires component appear in the component registry (components cannot be safely stored in app state, just their\n   names).\n\n   `options` is a map that can contain `::uism/actors` as an actor definition map (see `begin!`). Any other keys in options\n   are sent as the initial event data when the machine is started.\n\n   Returns a map that contains the actor props (by actor name) and the current state of the state machine as `:active-state`.\"\n  [app state-machine-definition id options]\n  (let [[uism-data set-uism-data!] (use-state (fn initialize-component-state []\n                                                (uism/current-state-and-actors (app/current-state app) id)))]\n    (use-lifecycle\n      (fn []\n        (uism/add-uism! app {:state-machine-definition state-machine-definition\n                             :id                       id\n                             :receive-props            set-uism-data!\n                             :actors                   (::uism/actors options)\n                             :initial-event-data       (dissoc options ::uism/actors)}))\n      (fn [] (uism/remove-uism! app id)))\n    uism-data))\n"]}